use utf8;

#------------------------------------------------------------------------
# Compiled template generated by the Template Toolkit version 2.24
#------------------------------------------------------------------------

Template::Document->new({
    METADATA => {
        'modtime' => '1389716719',
        'name' => 'search/boolean-charts.html.tmpl',
    },
    BLOCK => sub {
        my $context = shift || die "template sub called without context\n";
        my $stash   = $context->stash;
        my $output  = '';
        my $_tt_error;
        
        eval { BLOCK: {
    $output .=  "\n";
#line 9 "template/en/default/search/boolean-charts.html.tmpl"
    $stash->set('types', [ 'noop', 'equals', 'notequals', 'anyexact', 'substring', 'casesubstring', 'notsubstring', 'anywordssubstr', 'allwordssubstr', 'nowordssubstr', 'regexp', 'notregexp', 'lessthan', 'lessthaneq', 'greaterthan', 'greaterthaneq', 'anywords', 'allwords', 'nowords', 'changedbefore', 'changedafter', 'changedfrom', 'changedto', 'changedby', 'matches', 'notmatches' ]);
    $output .=  "\n\n<div class=\"bz_section_title\" id=\"custom_search_filter\">\n  <div id=\"custom_search_query_controller\" class=\"arrow\">&#9660;</div>\n  <a id=\"chart\" href=\"javascript:TUI_toggle_class('custom_search_query')\" >\n    Custom Search</a> <span class=\"section_help\">Didn't find what \n      you're looking for above? This area allows for ANDs, ORs, \n      and other more complex searches.</span>\n</div>\n<div id=\"custom_search_filter_section\" \n     class=\"bz_search_section custom_search_query\">";
#line 47 "template/en/default/search/boolean-charts.html.tmpl"
    $stash->set('indent_level', 0);
#line 48 "template/en/default/search/boolean-charts.html.tmpl"
    $stash->set('cond_num', 0);
#line 52 "template/en/default/search/boolean-charts.html.tmpl"
    
    # FOREACH 
    do {
        my ($_tt_value, $_tt_error, $_tt_oldloop);
        my $_tt_list = $stash->get(['default', 0, 'custom_search', 0]);
        
        unless (UNIVERSAL::isa($_tt_list, 'Template::Iterator')) {
            $_tt_list = Template::Config->iterator($_tt_list)
                || die $Template::Config::ERROR, "\n"; 
        }
    
        ($_tt_value, $_tt_error) = $_tt_list->get_first();
        eval { $_tt_oldloop = $stash->get('loop') };
        $stash->set('loop', $_tt_list);
        eval {
    FOR1:   while (! $_tt_error) {
                $stash->{'condition'} = $_tt_value;
#line 50 "template/en/default/search/boolean-charts.html.tmpl"
    $stash->set('cond_num', $stash->get(['loop', 0, 'count', 0]) - 1);
#line 51 "template/en/default/search/boolean-charts.html.tmpl"
    $output .=  $context->process('one_condition', { 'with_buttons' => 0 });;
                ($_tt_value, $_tt_error) = $_tt_list->get_next();
            }
        };
        $stash->set('loop', $_tt_oldloop);
        die $@ if $@;
        $_tt_error = 0 if $_tt_error && $_tt_error eq Template::Constants::STATUS_DONE;
        die $_tt_error if $_tt_error;
    };
    
#line 53 "template/en/default/search/boolean-charts.html.tmpl"
    $output .=  $context->process('one_condition', { 'with_buttons' => 1, 'condition' => { 'f' => 'noop'  }, 'cond_num' => $stash->get('cond_num') + 1 });
    $output .=  "\n  <script type=\"text/javascript\">\n    TUI_alternates['custom_search_query'] = '&#9658;';\n    TUI_hide_default('custom_search_query');\n    TUI_alternates['custom_search_advanced'] = \"Show Advanced Features\";\n    TUI_hide_default('custom_search_advanced');\n  </script>\n  <script type=\"text/javascript\" src=\"";
#line 63 "template/en/default/search/boolean-charts.html.tmpl"
    
    # FILTER
    $output .=  do {
        my $output = '';
        my $_tt_filter = $context->filter('mtime')
                  || $context->throw($context->error);
    
    $output .=  'js/custom-search.js';
        
        &$_tt_filter($output);
    };
    
    $output .=  "\"></script>\n  <script type=\"text/javascript\">\n    redirect_html4_browsers();\n    ";
    $output .=  "\n    var cs_and_label = 'Match ALL of the following:';\n    var cs_or_label  = 'Match ANY of the following:';\n    cs_reconfigure('custom_search_last_row');\n  </script>\n  <script type=\"text/javascript\" src=\"";
#line 71 "template/en/default/search/boolean-charts.html.tmpl"
    
    # FILTER
    $output .=  do {
        my $output = '';
        my $_tt_filter = $context->filter('mtime')
                  || $context->throw($context->error);
    
    $output .=  'js/history.js/native.history.js';
        
        &$_tt_filter($output);
    };
    
    $output .=  "\"></script>\n</div>\n\n";
    
    $output .=  "\n";
    
    $output .=  "\n";
        } };
        if ($@) {
            $_tt_error = $context->catch($@, \$output);
            die $_tt_error unless $_tt_error->type eq 'return';
        }
    
        return $output;
    },
    DEFBLOCKS => {
        'any_all_select' => sub {
            my $context = shift || die "template sub called without context\n";
            my $stash   = $context->stash;
            my $output  = '';
            my $_tt_error;
            
            eval { BLOCK: {
        $output .=  "\n  <div class=\"any_all_select\">\n    <select name=\"";
#line 170 "template/en/default/search/boolean-charts.html.tmpl"
        
        # FILTER
        $output .=  do {
            my $output = '';
            my $_tt_filter = $context->filter('html')
                      || $context->throw($context->error);
        
        $output .=  $stash->get('name');
            
            &$_tt_filter($output);
        };
        
        $output .=  "\" id=\"";
#line 170 "template/en/default/search/boolean-charts.html.tmpl"
        
        # FILTER
        $output .=  do {
            my $output = '';
            my $_tt_filter = $context->filter('html')
                      || $context->throw($context->error);
        
        $output .=  $stash->get('name');
            
            &$_tt_filter($output);
        };
        
        $output .=  "\"\n            onchange=\"fix_query_string(this)\">\n      <option value=\"AND\">Match ALL of the following separately:</option>\n      <option value=\"OR\" ";
#line 173 "template/en/default/search/boolean-charts.html.tmpl"
        if ($stash->get('selected') eq 'OR') {
        $output .=  ' selected="selected"';
        }
        
        $output .=  ">\n        Match ANY of the following separately:</option>\n      <option value=\"AND_G\" ";
#line 175 "template/en/default/search/boolean-charts.html.tmpl"
        if ($stash->get('selected') eq 'AND_G') {
        $output .=  ' selected';
        }
        
        $output .=  ">\n        Match ALL of the following against the same field:</option>\n    </select>";
#line 183 "template/en/default/search/boolean-charts.html.tmpl"
        if ($stash->get('with_advanced_link')) {
        $output .=  "\n      <a id=\"custom_search_advanced_controller\"\n         href=\"javascript:TUI_toggle_class('custom_search_advanced')\">\n        Hide Advanced Features\n      </a>";
        }
        
        $output .=  "\n  </div>";
            } };
            if ($@) {
                $_tt_error = $context->catch($@, \$output);
                die $_tt_error unless $_tt_error->type eq 'return';
            }
        
            return $output;
        },
        'one_condition' => sub {
            my $context = shift || die "template sub called without context\n";
            my $stash   = $context->stash;
            my $output  = '';
            my $_tt_error;
            
            eval { BLOCK: {
        $output .=  "\n  ";
#line 77 "template/en/default/search/boolean-charts.html.tmpl"
        if (! $stash->get(['condition', 0, 'f', 0])) {
        $context->throw('return', '', \$output);
        }
        
        $output .=  "\n  ";
#line 84 "template/en/default/search/boolean-charts.html.tmpl"
        if (! $stash->get('top_level_any_shown')) {
#line 80 "template/en/default/search/boolean-charts.html.tmpl"
        $output .=  $context->include('any_all_select', { 'name' => 'j_top', 'selected' => $stash->get(['default', 0, 'j_top', 0, 0, 0]), 'with_advanced_link' => 1 });
#line 83 "template/en/default/search/boolean-charts.html.tmpl"
        $stash->set('top_level_any_shown', 1);
        }
        
        $output .=  "\n";
#line 88 "template/en/default/search/boolean-charts.html.tmpl"
        if ($stash->get(['condition', 0, 'f', 0]) eq 'CP') {
#line 87 "template/en/default/search/boolean-charts.html.tmpl"
        $stash->set('indent_level', $stash->get('indent_level') - 1);
        }
        
        $output .=  "\n\n  <div class=\"custom_search_condition\"";
#line 91 "template/en/default/search/boolean-charts.html.tmpl"
        if ($stash->get('indent_level')) {
        $output .=  ' style="margin-left: '  . ($stash->get('indent_level') * 2)  . 'em"';
        }
        
#line 92 "template/en/default/search/boolean-charts.html.tmpl"
        if ($stash->get('with_buttons')) {
        $output .=  ' id="custom_search_last_row"';
        }
        
        $output .=  ">\n    ";
#line 98 "template/en/default/search/boolean-charts.html.tmpl"
        if ($stash->get(['previous_condition', 0, 'f', 0]) eq 'OP') {
#line 95 "template/en/default/search/boolean-charts.html.tmpl"
        $output .=  $context->include('any_all_select', { 'name' => 'j'  . ($stash->get('cond_num') - 1), 'selected' => $stash->get(['previous_condition', 0, 'j', 0]) });
        }
        
        $output .=  "\n";
#line 104 "template/en/default/search/boolean-charts.html.tmpl"
        if ($stash->get('with_buttons')) {
        $output .=  "\n      <button id=\"op_button\" type=\"button\" class=\"custom_search_advanced\"\n              title=\"Start a new group of criteria, including this row\"\n              onclick=\"custom_search_open_paren()\">(</button>";
        }
        
        $output .=  "\n";
#line 119 "template/en/default/search/boolean-charts.html.tmpl"
        if (!($stash->get(['condition', 0, 'f', 0]) eq 'CP')) {
        $output .=  "\n      ";
        $output .=  "\n      <span id=\"custom_search_not_container_";
#line 108 "template/en/default/search/boolean-charts.html.tmpl"
        
        # FILTER
        $output .=  do {
            my $output = '';
            my $_tt_filter = $context->filter('html')
                      || $context->throw($context->error);
        
        $output .=  $stash->get('cond_num');
            
            &$_tt_filter($output);
        };
        
        $output .=  "\"\n            class=\"custom_search_not_container";
#line 110 "template/en/default/search/boolean-charts.html.tmpl"
        if (!($stash->get(['condition', 0, 'n', 0]))) {
        $output .=  ' custom_search_advanced';
        }
        
        $output .=  "\"\n            title=\"Search for the opposite of the criteria here\">\n        <input type=\"checkbox\" id=\"n";
#line 112 "template/en/default/search/boolean-charts.html.tmpl"
        
        # FILTER
        $output .=  do {
            my $output = '';
            my $_tt_filter = $context->filter('html')
                      || $context->throw($context->error);
        
        $output .=  $stash->get('cond_num');
            
            &$_tt_filter($output);
        };
        
        $output .=  "\"\n               class=\"custom_search_form_field\"\n               name=\"n";
#line 114 "template/en/default/search/boolean-charts.html.tmpl"
        
        # FILTER
        $output .=  do {
            my $output = '';
            my $_tt_filter = $context->filter('html')
                      || $context->throw($context->error);
        
        $output .=  $stash->get('cond_num');
            
            &$_tt_filter($output);
        };
        
        $output .=  "\" value=\"1\"\n               onclick=\"custom_search_not_changed(";
#line 115 "template/en/default/search/boolean-charts.html.tmpl"
        
        # FILTER
        $output .=  do {
            my $output = '';
            my $_tt_filter = $context->filter('js')
                      || $context->throw($context->error);
        
        $output .=  $stash->get('cond_num');
            
            &$_tt_filter($output);
        };
        
        $output .=  ")\"";
#line 116 "template/en/default/search/boolean-charts.html.tmpl"
        if ($stash->get(['condition', 0, 'n', 0])) {
        $output .=  ' checked="checked"';
        }
        
        $output .=  ">\n        <label for=\"n";
#line 117 "template/en/default/search/boolean-charts.html.tmpl"
        
        # FILTER
        $output .=  do {
            my $output = '';
            my $_tt_filter = $context->filter('html')
                      || $context->throw($context->error);
        
        $output .=  $stash->get('cond_num');
            
            &$_tt_filter($output);
        };
        
        $output .=  "\">Not</label>\n      </span>";
        }
        
        $output .=  "\n";
#line 151 "template/en/default/search/boolean-charts.html.tmpl"
        if ($stash->get(['condition', 0, 'f', 0]) eq 'OP') {
        $output .=  "\n      <input type=\"hidden\" name=\"f";
#line 122 "template/en/default/search/boolean-charts.html.tmpl"
        
        # FILTER
        $output .=  do {
            my $output = '';
            my $_tt_filter = $context->filter('html')
                      || $context->throw($context->error);
        
        $output .=  $stash->get('cond_num');
            
            &$_tt_filter($output);
        };
        
        $output .=  "\"\n             id=\"f";
#line 123 "template/en/default/search/boolean-charts.html.tmpl"
        
        # FILTER
        $output .=  do {
            my $output = '';
            my $_tt_filter = $context->filter('html')
                      || $context->throw($context->error);
        
        $output .=  $stash->get('cond_num');
            
            &$_tt_filter($output);
        };
        
        $output .=  "\" value=\"OP\">\n      (";
#line 125 "template/en/default/search/boolean-charts.html.tmpl"
        $stash->set('indent_level', $stash->get('indent_level') + 1);
        }
        elsif ($stash->get(['condition', 0, 'f', 0]) eq 'CP') {
        $output .=  "\n      <input type=\"hidden\" name=\"f";
#line 127 "template/en/default/search/boolean-charts.html.tmpl"
        
        # FILTER
        $output .=  do {
            my $output = '';
            my $_tt_filter = $context->filter('html')
                      || $context->throw($context->error);
        
        $output .=  $stash->get('cond_num');
            
            &$_tt_filter($output);
        };
        
        $output .=  "\"\n             id=\"f";
#line 128 "template/en/default/search/boolean-charts.html.tmpl"
        
        # FILTER
        $output .=  do {
            my $output = '';
            my $_tt_filter = $context->filter('html')
                      || $context->throw($context->error);
        
        $output .=  $stash->get('cond_num');
            
            &$_tt_filter($output);
        };
        
        $output .=  "\" value=\"CP\">\n      )";
        }
        else {
        $output .=  "\n      <select name=\"f";
#line 131 "template/en/default/search/boolean-charts.html.tmpl"
        
        # FILTER
        $output .=  do {
            my $output = '';
            my $_tt_filter = $context->filter('html')
                      || $context->throw($context->error);
        
        $output .=  $stash->get('cond_num');
            
            &$_tt_filter($output);
        };
        
        $output .=  "\" title=\"Field\"\n              id=\"f";
#line 132 "template/en/default/search/boolean-charts.html.tmpl"
        
        # FILTER
        $output .=  do {
            my $output = '';
            my $_tt_filter = $context->filter('html')
                      || $context->throw($context->error);
        
        $output .=  $stash->get('cond_num');
            
            &$_tt_filter($output);
        };
        
        $output .=  "\"\n              onchange=\"fix_query_string(this)\"\n              class=\"custom_search_form_field\">";
#line 140 "template/en/default/search/boolean-charts.html.tmpl"
        
        # FOREACH 
        do {
            my ($_tt_value, $_tt_error, $_tt_oldloop);
            my $_tt_list = $stash->get('fields');
            
            unless (UNIVERSAL::isa($_tt_list, 'Template::Iterator')) {
                $_tt_list = Template::Config->iterator($_tt_list)
                    || die $Template::Config::ERROR, "\n"; 
            }
        
            ($_tt_value, $_tt_error) = $_tt_list->get_first();
            eval { $_tt_oldloop = $stash->get('loop') };
            $stash->set('loop', $_tt_list);
            eval {
        FOR1:   while (! $_tt_error) {
                    $stash->{'field'} = $_tt_value;
        $output .=  "\n          <option value=\"";
#line 136 "template/en/default/search/boolean-charts.html.tmpl"
        
        # FILTER
        $output .=  do {
            my $output = '';
            my $_tt_filter = $context->filter('html')
                      || $context->throw($context->error);
        
        $output .=  $stash->get(['field', 0, 'name', 0]);
            
            &$_tt_filter($output);
        };
        
        $output .=  "\"";
#line 137 "template/en/default/search/boolean-charts.html.tmpl"
        if ($stash->get(['field', 0, 'name', 0]) eq $stash->get(['condition', 0, 'f', 0])) {
        $output .=  ' selected="selected"';
        }
        
        $output .=  ">";
#line 138 "template/en/default/search/boolean-charts.html.tmpl"
        
        # FILTER
        $output .=  do {
            my $output = '';
            my $_tt_filter = $context->filter('html')
                      || $context->throw($context->error);
        
        $output .=  $stash->get(['field_descs', 0, $stash->get(['field', 0, 'name', 0]), 0]) || $stash->get(['field', 0, 'description', 0]);
            
            &$_tt_filter($output);
        };
        
        $output .=  "\n          </option>";;
                    ($_tt_value, $_tt_error) = $_tt_list->get_next();
                }
            };
            $stash->set('loop', $_tt_oldloop);
            die $@ if $@;
            $_tt_error = 0 if $_tt_error && $_tt_error eq Template::Constants::STATUS_DONE;
            die $_tt_error if $_tt_error;
        };
        
        $output .=  "\n      </select>\n    ";
#line 1 "template/en/default/search/boolean-charts.html.tmpl"
        $output .=  $context->include('search/type-select.html.tmpl', { 'name' => ("o" . $stash->get('cond_num')), 'class' => 'custom_search_form_field', 'types' => $stash->get('types'), 'selected' => $stash->get(['condition', 0, 'o', 0]) });
        $output .=  "\n    \n      <input name=\"v";
#line 147 "template/en/default/search/boolean-charts.html.tmpl"
        
        # FILTER
        $output .=  do {
            my $output = '';
            my $_tt_filter = $context->filter('html')
                      || $context->throw($context->error);
        
        $output .=  $stash->get('cond_num');
            
            &$_tt_filter($output);
        };
        
        $output .=  "\" title=\"Value\"\n             class=\"custom_search_form_field\"\n             onchange=\"fix_query_string(this)\"\n             value=\"";
#line 150 "template/en/default/search/boolean-charts.html.tmpl"
        
        # FILTER
        $output .=  do {
            my $output = '';
            my $_tt_filter = $context->filter('html')
                      || $context->throw($context->error);
        
        $output .=  $stash->get(['condition', 0, 'v', 0]);
            
            &$_tt_filter($output);
        };
        
        $output .=  "\">";
        }
        
        $output .=  "\n    ";
#line 162 "template/en/default/search/boolean-charts.html.tmpl"
        if ($stash->get('with_buttons')) {
        $output .=  "\n      <button class=\"custom_search_add_button\" type=\"button\"\n              id=\"add_button\" title=\"Add a new row\"\n              onclick=\"custom_search_new_row()\">+</button>\n      <span id=\"cp_container\" ";
#line 157 "template/en/default/search/boolean-charts.html.tmpl"
        if (! $stash->get('indent_level')) {
        $output .=  ' class="bz_default_hidden"';
        }
        
        $output .=  ">\n        <button id=\"cp_button\" type=\"button\"\n                title=\"End this group of criteria\"\n                onclick=\"custom_search_close_paren()\">)</button>\n      </span>";
        }
        
        $output .=  "\n  </div>\n  ";
#line 165 "template/en/default/search/boolean-charts.html.tmpl"
        $stash->set('previous_condition', $stash->get('condition'));
            } };
            if ($@) {
                $_tt_error = $context->catch($@, \$output);
                die $_tt_error unless $_tt_error->type eq 'return';
            }
        
            return $output;
        },
    },
});
