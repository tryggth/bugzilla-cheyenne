use utf8;

#------------------------------------------------------------------------
# Compiled template generated by the Template Toolkit version 2.24
#------------------------------------------------------------------------

Template::Document->new({
    METADATA => {
        'modtime' => '1389716719',
        'name' => 'search/field.html.tmpl',
    },
    BLOCK => sub {
        my $context = shift || die "template sub called without context\n";
        my $stash   = $context->stash;
        my $output  = '';
        my $_tt_error;
        
        eval { BLOCK: {
    $output .=  "\n  ";
#line 147 "template/en/default/search/field.html.tmpl"
    
    # SWITCH
    do {
        my $_tt_result = $stash->get(['field', 0, 'type', 0]);
        my $_tt_match;
        SWITCH: {
    $_tt_match = [ '1', '4', '0' ];
    $_tt_match = [ $_tt_match ] unless ref $_tt_match eq 'ARRAY';
    if (grep(/^\Q$_tt_result\E$/, @$_tt_match)) {
#line 13 "template/en/default/search/field.html.tmpl"
    $output .=  $context->include('bug/field-label.html.tmpl', { 'field' => $stash->get('field'), 'tag_name' => 'span', 'editable' => 1 });
#line 18 "template/en/default/search/field.html.tmpl"
    $output .=  $context->include('search/type-select.html.tmpl', { 'name' => $stash->get(['field', 0, 'name', 0])  . '_type', 'types' => $stash->get('types'), 'selected' => $stash->get('type_selected') });
    $output .=  "    \n    <input name=\"";
#line 23 "template/en/default/search/field.html.tmpl"
    
    # FILTER
    $output .=  do {
        my $output = '';
        my $_tt_filter = $context->filter('html')
                  || $context->throw($context->error);
    
    $output .=  $stash->get(['field', 0, 'name', 0]);
        
        &$_tt_filter($output);
    };
    
    $output .=  "\" \n           id=\"";
#line 24 "template/en/default/search/field.html.tmpl"
    
    # FILTER
    $output .=  do {
        my $output = '';
        my $_tt_filter = $context->filter('html')
                  || $context->throw($context->error);
    
    $output .=  $stash->get(['field', 0, 'name', 0]);
        
        &$_tt_filter($output);
    };
    
    $output .=  "\" size=\"40\"";
#line 25 "template/en/default/search/field.html.tmpl"
    if ($stash->get('onchange')) {
    $output .=  " onchange=\"";
#line 25 "template/en/default/search/field.html.tmpl"
    
    # FILTER
    $output .=  do {
        my $output = '';
        my $_tt_filter = $context->filter('html')
                  || $context->throw($context->error);
    
    $output .=  $stash->get('onchange');
        
        &$_tt_filter($output);
    };
    
    $output .=  "\"";
    }
    
    $output .=  "\n           value=\"";
#line 26 "template/en/default/search/field.html.tmpl"
    
    # FILTER
    $output .=  do {
        my $output = '';
        my $_tt_filter = $context->filter('html')
                  || $context->throw($context->error);
    
    $output .=  $stash->get('value');
        
        &$_tt_filter($output);
    };
    
    $output .=  "\">              ";
        last SWITCH;
    }
    $_tt_match = '8';
    $_tt_match = [ $_tt_match ] unless ref $_tt_match eq 'ARRAY';
    if (grep(/^\Q$_tt_result\E$/, @$_tt_match)) {
#line 28 "template/en/default/search/field.html.tmpl"
    $output .=  $context->include('bug/field-label.html.tmpl', { 'field' => $stash->get('field'), 'tag_name' => 'span', 'editable' => 1 });
#line 33 "template/en/default/search/field.html.tmpl"
    $output .=  $context->include('search/type-select.html.tmpl', { 'name' => $stash->get(['field', 0, 'name', 0])  . '_type', 'types' => $stash->get('types'), 'selected' => $stash->get('type_selected') });
    $output .=  "\n    <div id=\"";
#line 38 "template/en/default/search/field.html.tmpl"
    
    # FILTER
    $output .=  do {
        my $output = '';
        my $_tt_filter = $context->filter('html')
                  || $context->throw($context->error);
    
    $output .=  $stash->get(['field', 0, 'name', 0]);
        
        &$_tt_filter($output);
    };
    
    $output .=  "_container\">\n       <input name=\"";
#line 39 "template/en/default/search/field.html.tmpl"
    
    # FILTER
    $output .=  do {
        my $output = '';
        my $_tt_filter = $context->filter('html')
                  || $context->throw($context->error);
    
    $output .=  $stash->get(['field', 0, 'name', 0]);
        
        &$_tt_filter($output);
    };
    
    $output .=  "\" \n              id=\"";
#line 40 "template/en/default/search/field.html.tmpl"
    
    # FILTER
    $output .=  do {
        my $output = '';
        my $_tt_filter = $context->filter('html')
                  || $context->throw($context->error);
    
    $output .=  $stash->get(['field', 0, 'name', 0]);
        
        &$_tt_filter($output);
    };
    
    $output .=  "\" size=\"40\"";
#line 41 "template/en/default/search/field.html.tmpl"
    if ($stash->get('onchange')) {
    $output .=  " onchange=\"";
#line 41 "template/en/default/search/field.html.tmpl"
    
    # FILTER
    $output .=  do {
        my $output = '';
        my $_tt_filter = $context->filter('html')
                  || $context->throw($context->error);
    
    $output .=  $stash->get('onchange');
        
        &$_tt_filter($output);
    };
    
    $output .=  "\"";
    }
    
    $output .=  "\n              value=\"";
#line 42 "template/en/default/search/field.html.tmpl"
    
    # FILTER
    $output .=  do {
        my $output = '';
        my $_tt_filter = $context->filter('html')
                  || $context->throw($context->error);
    
    $output .=  $stash->get('value');
        
        &$_tt_filter($output);
    };
    
    $output .=  "\">\n       <div id=\"";
#line 43 "template/en/default/search/field.html.tmpl"
    
    # FILTER
    $output .=  do {
        my $output = '';
        my $_tt_filter = $context->filter('html')
                  || $context->throw($context->error);
    
    $output .=  $stash->get(['field', 0, 'name', 0]);
        
        &$_tt_filter($output);
    };
    
    $output .=  "_autocomplete\"></div>\n    </div>\n    <script type=\"text/javascript\" defer=\"defer\">\n      if (typeof YAHOO.bugzilla.field_array === \"undefined\")\n        YAHOO.bugzilla.field_array = [];\n      YAHOO.bugzilla.field_array[\"";
#line 48 "template/en/default/search/field.html.tmpl"
    
    # FILTER
    $output .=  do {
        my $output = '';
        my $_tt_filter = $context->filter('js')
                  || $context->throw($context->error);
    
    $output .=  $stash->get(['field', 0, 'name', 0]);
        
        &$_tt_filter($output);
    };
    
    $output .=  "\"] = [";
#line 51 "template/en/default/search/field.html.tmpl"
    
    # FOREACH 
    do {
        my ($_tt_value, $_tt_error, $_tt_oldloop);
        my $_tt_list = $stash->get('possible_values');
        
        unless (UNIVERSAL::isa($_tt_list, 'Template::Iterator')) {
            $_tt_list = Template::Config->iterator($_tt_list)
                || die $Template::Config::ERROR, "\n"; 
        }
    
        ($_tt_value, $_tt_error) = $_tt_list->get_first();
        eval { $_tt_oldloop = $stash->get('loop') };
        $stash->set('loop', $_tt_list);
        eval {
    FOR1:   while (! $_tt_error) {
                $stash->{'val'} = $_tt_value;
    
    $output .=  "\"";
#line 50 "template/en/default/search/field.html.tmpl"
    
    # FILTER
    $output .=  do {
        my $output = '';
        my $_tt_filter = $context->filter('js')
                  || $context->throw($context->error);
    
    $output .=  $stash->get('val');
        
        &$_tt_filter($output);
    };
    
    $output .=  "\"";
#line 51 "template/en/default/search/field.html.tmpl"
    if (! $stash->get(['loop', 0, 'last', 0])) {
    $output .=  ',';
    }
    ;
                ($_tt_value, $_tt_error) = $_tt_list->get_next();
            }
        };
        $stash->set('loop', $_tt_oldloop);
        die $@ if $@;
        $_tt_error = 0 if $_tt_error && $_tt_error eq Template::Constants::STATUS_DONE;
        die $_tt_error if $_tt_error;
    };
    
    $output .=  "];\n      YAHOO.bugzilla.fieldAutocomplete.init('";
#line 52 "template/en/default/search/field.html.tmpl"
    
    # FILTER
    $output .=  do {
        my $output = '';
        my $_tt_filter = $context->filter('js')
                  || $context->throw($context->error);
    
    $output .=  $stash->get(['field', 0, 'name', 0]);
        
        &$_tt_filter($output);
    };
    
    $output .=  "',\n                                            '";
#line 53 "template/en/default/search/field.html.tmpl"
    
    # FILTER
    $output .=  do {
        my $output = '';
        my $_tt_filter = $context->filter('js')
                  || $context->throw($context->error);
    
    $output .=  $stash->get(['field', 0, 'name', 0]);
        
        &$_tt_filter($output);
    };
    
    $output .=  "_autocomplete');\n    </script>";
        last SWITCH;
    }
    $_tt_match = '5';
    $_tt_match = [ $_tt_match ] unless ref $_tt_match eq 'ARRAY';
    if (grep(/^\Q$_tt_result\E$/, @$_tt_match)) {
#line 56 "template/en/default/search/field.html.tmpl"
    $output .=  $context->include('bug/field-label.html.tmpl', { 'field' => $stash->get('field'), 'tag_name' => 'span', 'editable' => 1 });
    $output .=  "\n    from <input name=\"";
#line 61 "template/en/default/search/field.html.tmpl"
    
    # FILTER
    $output .=  do {
        my $output = '';
        my $_tt_filter = $context->filter('html')
                  || $context->throw($context->error);
    
    $output .=  $stash->get(['field', 0, 'name', 0]);
        
        &$_tt_filter($output);
    };
    
    $output .=  "from\" \n                id=\"";
#line 62 "template/en/default/search/field.html.tmpl"
    
    # FILTER
    $output .=  do {
        my $output = '';
        my $_tt_filter = $context->filter('html')
                  || $context->throw($context->error);
    
    $output .=  $stash->get(['field', 0, 'name', 0]);
        
        &$_tt_filter($output);
    };
    
    $output .=  "\" \n                size=\"10\" maxlength=\"10\"\n                value=\"";
#line 64 "template/en/default/search/field.html.tmpl"
    
    # FILTER
    $output .=  do {
        my $output = '';
        my $_tt_filter = $context->filter('html')
                  || $context->throw($context->error);
    
    $output .=  $stash->get(['value', 0, 0, 0]);
        
        &$_tt_filter($output);
    };
    
    $output .=  "\" \n                onchange=\"updateCalendarFromField(this);";
#line 65 "template/en/default/search/field.html.tmpl"
    
    # FILTER
    $output .=  do {
        my $output = '';
        my $_tt_filter = $context->filter('html')
                  || $context->throw($context->error);
    
    $output .=  $stash->get('onchange');
        
        &$_tt_filter($output);
    };
    
    $output .=  "\">\n         <button type=\"button\" class=\"calendar_button\"\n                        id=\"button_calendar_";
#line 67 "template/en/default/search/field.html.tmpl"
    
    # FILTER
    $output .=  do {
        my $output = '';
        my $_tt_filter = $context->filter('html')
                  || $context->throw($context->error);
    
    $output .=  $stash->get(['field', 0, 'name', 0]);
        
        &$_tt_filter($output);
    };
    
    $output .=  "\"\n                        onclick=\"showCalendar('";
#line 68 "template/en/default/search/field.html.tmpl"
    
    # FILTER
    $output .=  do {
        my $output = '';
        my $_tt_filter = $context->filter('js')
                  || $context->throw($context->error);
    
    $output .=  $stash->get(['field', 0, 'name', 0]);
        
        &$_tt_filter($output);
    };
    
    $output .=  "')\">\n           <span>Calendar</span>\n         </button>\n         <span id=\"con_calendar_";
#line 71 "template/en/default/search/field.html.tmpl"
    
    # FILTER
    $output .=  do {
        my $output = '';
        my $_tt_filter = $context->filter('html')
                  || $context->throw($context->error);
    
    $output .=  $stash->get(['field', 0, 'name', 0]);
        
        &$_tt_filter($output);
    };
    
    $output .=  "\"></span>               \n    to <input name=\"";
#line 72 "template/en/default/search/field.html.tmpl"
    
    # FILTER
    $output .=  do {
        my $output = '';
        my $_tt_filter = $context->filter('html')
                  || $context->throw($context->error);
    
    $output .=  $stash->get(['field', 0, 'name', 0]);
        
        &$_tt_filter($output);
    };
    
    $output .=  "to\" \n              id=\"";
#line 73 "template/en/default/search/field.html.tmpl"
    
    # FILTER
    $output .=  do {
        my $output = '';
        my $_tt_filter = $context->filter('html')
                  || $context->throw($context->error);
    
    $output .=  $stash->get(['field', 0, 'name', 0]);
        
        &$_tt_filter($output);
    };
    
    $output .=  "to\" size=\"10\" maxlength=\"10\"\n              value=\"";
#line 74 "template/en/default/search/field.html.tmpl"
    
    # FILTER
    $output .=  do {
        my $output = '';
        my $_tt_filter = $context->filter('html')
                  || $context->throw($context->error);
    
    $output .=  $stash->get(['value', 0, 1, 0]);
        
        &$_tt_filter($output);
    };
    
    $output .=  "\" \n              onchange=\"updateCalendarFromField(this);";
#line 75 "template/en/default/search/field.html.tmpl"
    
    # FILTER
    $output .=  do {
        my $output = '';
        my $_tt_filter = $context->filter('html')
                  || $context->throw($context->error);
    
    $output .=  $stash->get('onchange');
        
        &$_tt_filter($output);
    };
    
    $output .=  "\">\n       <button type=\"button\" class=\"calendar_button\"\n                      id=\"button_calendar_";
#line 77 "template/en/default/search/field.html.tmpl"
    
    # FILTER
    $output .=  do {
        my $output = '';
        my $_tt_filter = $context->filter('html')
                  || $context->throw($context->error);
    
    $output .=  $stash->get(['field', 0, 'name', 0]);
        
        &$_tt_filter($output);
    };
    
    $output .=  "to\"\n                      onclick=\"showCalendar('";
#line 78 "template/en/default/search/field.html.tmpl"
    
    # FILTER
    $output .=  do {
        my $output = '';
        my $_tt_filter = $context->filter('js')
                  || $context->throw($context->error);
    
    $output .=  $stash->get(['field', 0, 'name', 0]);
        
        &$_tt_filter($output);
    };
    
    $output .=  "to')\">\n         <span>Calendar</span>\n       </button>\n    <small>(YYYY-MM-DD or relative dates)</small>\n    \n    <span id=\"con_calendar_";
#line 83 "template/en/default/search/field.html.tmpl"
    
    # FILTER
    $output .=  do {
        my $output = '';
        my $_tt_filter = $context->filter('html')
                  || $context->throw($context->error);
    
    $output .=  $stash->get(['field', 0, 'name', 0]);
        
        &$_tt_filter($output);
    };
    
    $output .=  "to\"></span>\n    <script type=\"text/javascript\">\n      <!--\n        ";
#line 86 "template/en/default/search/field.html.tmpl"
    $output .=  $context->process('global/calendar.js.tmpl', { 'id' => $stash->get(['field', 0, 'name', 0]) });
#line 87 "template/en/default/search/field.html.tmpl"
    $output .=  $context->process('global/calendar.js.tmpl', { 'id' => $stash->get(['field', 0, 'name', 0])  . 'to' });
    $output .=  "\n      //--></script>";
        last SWITCH;
    }
    $_tt_match = [ '2', '3' ];
    $_tt_match = [ $_tt_match ] unless ref $_tt_match eq 'ARRAY';
    if (grep(/^\Q$_tt_result\E$/, @$_tt_match)) {
    $output .=  "\n    <div id=\"container_";
#line 91 "template/en/default/search/field.html.tmpl"
    
    # FILTER
    $output .=  do {
        my $output = '';
        my $_tt_filter = $context->filter('html')
                  || $context->throw($context->error);
    
    $output .=  $stash->get(['field', 0, 'name', 0]);
        
        &$_tt_filter($output);
    };
    
    $output .=  "\" class=\"search_field_grid\">      ";
#line 92 "template/en/default/search/field.html.tmpl"
    $output .=  $context->include('bug/field-label.html.tmpl', { 'field' => $stash->get('field'), 'editable' => 1, 'tag_name' => 'span' });
    $output .=  "\n      <select name=\"";
#line 97 "template/en/default/search/field.html.tmpl"
    
    # FILTER
    $output .=  do {
        my $output = '';
        my $_tt_filter = $context->filter('html')
                  || $context->throw($context->error);
    
    $output .=  $stash->get(['field', 0, 'name', 0]);
        
        &$_tt_filter($output);
    };
    
    $output .=  "\" \n              id=\"";
#line 98 "template/en/default/search/field.html.tmpl"
    
    # FILTER
    $output .=  do {
        my $output = '';
        my $_tt_filter = $context->filter('html')
                  || $context->throw($context->error);
    
    $output .=  $stash->get(['field', 0, 'name', 0]);
        
        &$_tt_filter($output);
    };
    
    $output .=  "\" ";
#line 99 "template/en/default/search/field.html.tmpl"
    if ($stash->get('onchange')) {
    $output .=  " onchange=\"";
#line 99 "template/en/default/search/field.html.tmpl"
    
    # FILTER
    $output .=  do {
        my $output = '';
        my $_tt_filter = $context->filter('html')
                  || $context->throw($context->error);
    
    $output .=  $stash->get('onchange');
        
        &$_tt_filter($output);
    };
    
    $output .=  "\"";
    }
    
    $output .=  "\n        multiple=\"multiple\" size=\"7\">";
#line 101 "template/en/default/search/field.html.tmpl"
    $stash->set('legal_values', $stash->get($stash->get(['field', 0, 'name', 0])));
#line 104 "template/en/default/search/field.html.tmpl"
    if ($stash->get(['field', 0, 'name', 0]) eq 'component') {
#line 103 "template/en/default/search/field.html.tmpl"
    $stash->set('legal_values', $stash->get('component_'));
    }
    
#line 113 "template/en/default/search/field.html.tmpl"
    
    # FOREACH 
    do {
        my ($_tt_value, $_tt_error, $_tt_oldloop);
        my $_tt_list = $stash->get('legal_values');
        
        unless (UNIVERSAL::isa($_tt_list, 'Template::Iterator')) {
            $_tt_list = Template::Config->iterator($_tt_list)
                || die $Template::Config::ERROR, "\n"; 
        }
    
        ($_tt_value, $_tt_error) = $_tt_list->get_first();
        eval { $_tt_oldloop = $stash->get('loop') };
        $stash->set('loop', $_tt_list);
        eval {
    FOR1:   while (! $_tt_error) {
                $stash->{'current_value'} = $_tt_value;
#line 106 "template/en/default/search/field.html.tmpl"
    $stash->set('v', $stash->get(['current_value', 0, 'name', 0]) || '---');
#line 107 "template/en/default/search/field.html.tmpl"
    $stash->set('display', $stash->get(['display_value', [ $stash->get(['field', 0, 'name', 0]), $stash->get(['current_value', 0, 'name', 0]) ]]));
    $output .=  "\n          <option ";
#line 108 "template/en/default/search/field.html.tmpl"
    if ($stash->get('v') ne $stash->get('display')) {
    $output .=  "value=\"";
#line 108 "template/en/default/search/field.html.tmpl"
    
    # FILTER
    $output .=  do {
        my $output = '';
        my $_tt_filter = $context->filter('html')
                  || $context->throw($context->error);
    
    $output .=  $stash->get('v');
        
        &$_tt_filter($output);
    };
    
    $output .=  "\"";
    }
    
    $output .=  "id=\"v";
#line 109 "template/en/default/search/field.html.tmpl"
    
    # FILTER
    $output .=  do {
        my $output = '';
        my $_tt_filter = $context->filter('html')
                  || $context->throw($context->error);
    
    $output .=  $stash->get(['current_value', 0, 'id', 0]);
        
        &$_tt_filter($output);
    };
    
    $output .=  "_";
#line 109 "template/en/default/search/field.html.tmpl"
    
    # FILTER
    $output .=  do {
        my $output = '';
        my $_tt_filter = $context->filter('html')
                  || $context->throw($context->error);
    
    $output .=  $stash->get(['field', 0, 'name', 0]);
        
        &$_tt_filter($output);
    };
    
    $output .=  "\"";
#line 110 "template/en/default/search/field.html.tmpl"
    if ($stash->get(['value', 0, 'contains', [ $stash->get('v') ]])) {
    $output .=  ' selected="selected"';
    }
    
    $output .=  ">";
#line 111 "template/en/default/search/field.html.tmpl"
    
    # FILTER
    $output .=  do {
        my $output = '';
        my $_tt_filter = $context->filter('html')
                  || $context->throw($context->error);
    
    $output .=  $stash->get('display');
        
        &$_tt_filter($output);
    };
    
    $output .=  "</option>";;
                ($_tt_value, $_tt_error) = $_tt_list->get_next();
            }
        };
        $stash->set('loop', $_tt_oldloop);
        die $@ if $@;
        $_tt_error = 0 if $_tt_error && $_tt_error eq Template::Constants::STATUS_DONE;
        die $_tt_error if $_tt_error;
    };
    
    $output .=  "\n      </select>\n    </div>\n";
#line 125 "template/en/default/search/field.html.tmpl"
    if ($stash->get(['value_controllers', 0, $stash->get(['field', 0, 'name', 0]), 0, 'defined', 0])) {
    $output .=  "\n      <script type=\"text/javascript\"><!--\n        ";
#line 123 "template/en/default/search/field.html.tmpl"
    
    # FILTER
    $output .=  do {
        my $output = '';
        my $_tt_filter = $context->filter('collapse')
                  || $context->throw($context->error);
    
#line 122 "template/en/default/search/field.html.tmpl"
    
    # FOREACH 
    do {
        my ($_tt_value, $_tt_error, $_tt_oldloop);
        my $_tt_list = $stash->get(['value_controllers', 0, $stash->get(['field', 0, 'name', 0]), 0, 'keys', 0]);
        
        unless (UNIVERSAL::isa($_tt_list, 'Template::Iterator')) {
            $_tt_list = Template::Config->iterator($_tt_list)
                || die $Template::Config::ERROR, "\n"; 
        }
    
        ($_tt_value, $_tt_error) = $_tt_list->get_first();
        eval { $_tt_oldloop = $stash->get('loop') };
        $stash->set('loop', $_tt_list);
        eval {
    FOR1:   while (! $_tt_error) {
                $stash->{'accessor'} = $_tt_value;
#line 121 "template/en/default/search/field.html.tmpl"
    $output .=  $context->process('controller_js');;
                ($_tt_value, $_tt_error) = $_tt_list->get_next();
            }
        };
        $stash->set('loop', $_tt_oldloop);
        die $@ if $@;
        $_tt_error = 0 if $_tt_error && $_tt_error eq Template::Constants::STATUS_DONE;
        die $_tt_error if $_tt_error;
    };
    
        
        &$_tt_filter($output);
    };
    
    $output .=  "// --></script>";
    }
    
#line 145 "template/en/default/search/field.html.tmpl"
    if ($stash->get(['duplicates', 0, $stash->get(['field', 0, 'name', 0]), 0, 'keys', 0, 'size', 0])) {
#line 127 "template/en/default/search/field.html.tmpl"
    $stash->set('field_dups', $stash->get(['duplicates', 0, $stash->get(['field', 0, 'name', 0]), 0]));
#line 128 "template/en/default/search/field.html.tmpl"
    $stash->set('dup_counts', $stash->get(['duplicate_count', 0, $stash->get(['field', 0, 'name', 0]), 0]));
    $output .=  "\n      <script type=\"text/javascript\">\n       ";
#line 143 "template/en/default/search/field.html.tmpl"
    
    # FILTER
    $output .=  do {
        my $output = '';
        my $_tt_filter = $context->filter('collapse')
                  || $context->throw($context->error);
    
    $output .=  "\n          bz_option_duplicates['";
#line 131 "template/en/default/search/field.html.tmpl"
    
    # FILTER
    $output .=  do {
        my $output = '';
        my $_tt_filter = $context->filter('js')
                  || $context->throw($context->error);
    
    $output .=  $stash->get(['field', 0, 'name', 0]);
        
        &$_tt_filter($output);
    };
    
    $output .=  "'] = {";
#line 135 "template/en/default/search/field.html.tmpl"
    
    # FOREACH 
    do {
        my ($_tt_value, $_tt_error, $_tt_oldloop);
        my $_tt_list = $stash->get(['field_dups', 0, 'keys', 0]);
        
        unless (UNIVERSAL::isa($_tt_list, 'Template::Iterator')) {
            $_tt_list = Template::Config->iterator($_tt_list)
                || die $Template::Config::ERROR, "\n"; 
        }
    
        ($_tt_value, $_tt_error) = $_tt_list->get_first();
        eval { $_tt_oldloop = $stash->get('loop') };
        $stash->set('loop', $_tt_list);
        eval {
    FOR1:   while (! $_tt_error) {
                $stash->{'dup'} = $_tt_value;
#line 133 "template/en/default/search/field.html.tmpl"
    
    # FILTER
    $output .=  do {
        my $output = '';
        my $_tt_filter = $context->filter('js')
                  || $context->throw($context->error);
    
    $output .=  $stash->get('dup');
        
        &$_tt_filter($output);
    };
    
    $output .=  ":";
#line 133 "template/en/default/search/field.html.tmpl"
    
    # FILTER
    $output .=  do {
        my $output = '';
        my $_tt_filter = $context->filter('js')
                  || $context->throw($context->error);
    
    $output .=  $stash->get(['field_dups', 0, $stash->get('dup'), 0, 'id', 0]);
        
        &$_tt_filter($output);
    };
    
#line 134 "template/en/default/search/field.html.tmpl"
    if (!($stash->get(['loop', 0, 'last', 0]))) {
    $output .=  ',';
    }
    ;
                ($_tt_value, $_tt_error) = $_tt_list->get_next();
            }
        };
        $stash->set('loop', $_tt_oldloop);
        die $@ if $@;
        $_tt_error = 0 if $_tt_error && $_tt_error eq Template::Constants::STATUS_DONE;
        die $_tt_error if $_tt_error;
    };
    
    $output .=  "};\n          bz_option_duplicate_count['";
#line 137 "template/en/default/search/field.html.tmpl"
    
    # FILTER
    $output .=  do {
        my $output = '';
        my $_tt_filter = $context->filter('js')
                  || $context->throw($context->error);
    
    $output .=  $stash->get(['field', 0, 'name', 0]);
        
        &$_tt_filter($output);
    };
    
    $output .=  "'] = {";
#line 141 "template/en/default/search/field.html.tmpl"
    
    # FOREACH 
    do {
        my ($_tt_value, $_tt_error, $_tt_oldloop);
        my $_tt_list = $stash->get(['dup_counts', 0, 'keys', 0]);
        
        unless (UNIVERSAL::isa($_tt_list, 'Template::Iterator')) {
            $_tt_list = Template::Config->iterator($_tt_list)
                || die $Template::Config::ERROR, "\n"; 
        }
    
        ($_tt_value, $_tt_error) = $_tt_list->get_first();
        eval { $_tt_oldloop = $stash->get('loop') };
        $stash->set('loop', $_tt_list);
        eval {
    FOR1:   while (! $_tt_error) {
                $stash->{'dup_target'} = $_tt_value;
#line 139 "template/en/default/search/field.html.tmpl"
    
    # FILTER
    $output .=  do {
        my $output = '';
        my $_tt_filter = $context->filter('js')
                  || $context->throw($context->error);
    
    $output .=  $stash->get('dup_target');
        
        &$_tt_filter($output);
    };
    
    $output .=  ":";
#line 139 "template/en/default/search/field.html.tmpl"
    
    # FILTER
    $output .=  do {
        my $output = '';
        my $_tt_filter = $context->filter('js')
                  || $context->throw($context->error);
    
    $output .=  $stash->get(['dup_counts', 0, $stash->get('dup_target'), 0]);
        
        &$_tt_filter($output);
    };
    
#line 140 "template/en/default/search/field.html.tmpl"
    if (!($stash->get(['loop', 0, 'last', 0]))) {
    $output .=  ',';
    }
    ;
                ($_tt_value, $_tt_error) = $_tt_list->get_next();
            }
        };
        $stash->set('loop', $_tt_oldloop);
        die $@ if $@;
        $_tt_error = 0 if $_tt_error && $_tt_error eq Template::Constants::STATUS_DONE;
        die $_tt_error if $_tt_error;
    };
    
    $output .=  "\n          };";
        
        &$_tt_filter($output);
    };
    
    $output .=  "\n      </script>";
    }
    
    $output .=  "\n";
        last SWITCH;
    }
    
        }
    };
    
    $output .=  "\n";
    $output .=  "\n";
    
    $output .=  "\n";
        } };
        if ($@) {
            $_tt_error = $context->catch($@, \$output);
            die $_tt_error unless $_tt_error->type eq 'return';
        }
    
        return $output;
    },
    DEFBLOCKS => {
        'controller_js' => sub {
            my $context = shift || die "template sub called without context\n";
            my $stash   = $context->stash;
            my $output  = '';
            my $_tt_error;
            
            eval { BLOCK: {
        $output .=  "\n  ";
        $output .=  "\n  YAHOO.util.Event.onDOMReady(function() {\n      var field = document.getElementById('";
#line 156 "template/en/default/search/field.html.tmpl"
        
        # FILTER
        $output .=  do {
            my $output = '';
            my $_tt_filter = $context->filter('js')
                      || $context->throw($context->error);
        
        $output .=  $stash->get(['field', 0, 'name', 0]);
            
            &$_tt_filter($output);
        };
        
        $output .=  "');\n      if (field.selectedIndex != -1) bz_fireEvent(field, 'change');\n  });\n";
#line 160 "template/en/default/search/field.html.tmpl"
        $stash->set('sub_field', $stash->get(['value_controllers', 0, $stash->get(['field', 0, 'name', 0]), 0, $stash->get('accessor'), 0]));
#line 161 "template/en/default/search/field.html.tmpl"
        $stash->set('prod_per_class', {   });
#line 166 "template/en/default/search/field.html.tmpl"
        if ($stash->get(['field', 0, 'name', 0]) eq 'classification') {
#line 165 "template/en/default/search/field.html.tmpl"
        
        # FOREACH 
        do {
            my ($_tt_value, $_tt_error, $_tt_oldloop);
            my $_tt_list = $stash->get('product');
            
            unless (UNIVERSAL::isa($_tt_list, 'Template::Iterator')) {
                $_tt_list = Template::Config->iterator($_tt_list)
                    || die $Template::Config::ERROR, "\n"; 
            }
        
            ($_tt_value, $_tt_error) = $_tt_list->get_first();
            eval { $_tt_oldloop = $stash->get('loop') };
            $stash->set('loop', $_tt_list);
            eval {
        FOR1:   while (! $_tt_error) {
                    $stash->{'p'} = $_tt_value;
#line 164 "template/en/default/search/field.html.tmpl"
        $stash->set(['prod_per_class', 0, $stash->get(['p', 0, 'classification_id', 0]), 0, $stash->get(['p', 0, 'id', 0]), 0], 1);;
                    ($_tt_value, $_tt_error) = $_tt_list->get_next();
                }
            };
            $stash->set('loop', $_tt_oldloop);
            die $@ if $@;
            $_tt_error = 0 if $_tt_error && $_tt_error eq Template::Constants::STATUS_DONE;
            die $_tt_error if $_tt_error;
        };
        
        }
        
        $output .=  "\n";
#line 183 "template/en/default/search/field.html.tmpl"
        
        # FOREACH 
        do {
            my ($_tt_value, $_tt_error, $_tt_oldloop);
            my $_tt_list = $stash->get('legal_values');
            
            unless (UNIVERSAL::isa($_tt_list, 'Template::Iterator')) {
                $_tt_list = Template::Config->iterator($_tt_list)
                    || die $Template::Config::ERROR, "\n"; 
            }
        
            ($_tt_value, $_tt_error) = $_tt_list->get_first();
            eval { $_tt_oldloop = $stash->get('loop') };
            $stash->set('loop', $_tt_list);
            eval {
        FOR1:   while (! $_tt_error) {
                    $stash->{'legal_value'} = $_tt_value;
#line 169 "template/en/default/search/field.html.tmpl"
        $stash->set('controlled_ids', [ ]);
#line 176 "template/en/default/search/field.html.tmpl"
        if ($stash->get(['field', 0, 'name', 0]) eq 'classification') {
#line 171 "template/en/default/search/field.html.tmpl"
        $stash->set('controlled_ids', $stash->get(['prod_per_class', 0, $stash->get(['legal_value', 0, 'id', 0]), 0, 'keys', 0]));
        }
        else {
#line 175 "template/en/default/search/field.html.tmpl"
        
        # FOREACH 
        do {
            my ($_tt_value, $_tt_error, $_tt_oldloop);
            my $_tt_list = $stash->get(['legal_value', 0, $stash->get('accessor'), 0]);
            
            unless (UNIVERSAL::isa($_tt_list, 'Template::Iterator')) {
                $_tt_list = Template::Config->iterator($_tt_list)
                    || die $Template::Config::ERROR, "\n"; 
            }
        
            ($_tt_value, $_tt_error) = $_tt_list->get_first();
            eval { $_tt_oldloop = $stash->get('loop') };
            $stash->set('loop', $_tt_list);
            eval {
        FOR2:   while (! $_tt_error) {
                    $stash->{'sub_value'} = $_tt_value;
#line 174 "template/en/default/search/field.html.tmpl"
        $output .=  $stash->get(['controlled_ids', 0, 'push', [ $stash->get(['sub_value', 0, 'id', 0]) ]]);;
                    ($_tt_value, $_tt_error) = $_tt_list->get_next();
                }
            };
            $stash->set('loop', $_tt_oldloop);
            die $@ if $@;
            $_tt_error = 0 if $_tt_error && $_tt_error eq Template::Constants::STATUS_DONE;
            die $_tt_error if $_tt_error;
        };
        
        }
        
#line 177 "template/en/default/search/field.html.tmpl"
        if (! $stash->get(['controlled_ids', 0, 'size', 0])) {
        ($_tt_value, $_tt_error) = $_tt_list->get_next();
        next FOR1;
        
        }
        
        $output .=  "\n      showValueWhen('";
#line 178 "template/en/default/search/field.html.tmpl"
        
        # FILTER
        $output .=  do {
            my $output = '';
            my $_tt_filter = $context->filter('js')
                      || $context->throw($context->error);
        
        $output .=  $stash->get(['sub_field', 0, 'name', 0]);
            
            &$_tt_filter($output);
        };
        
        $output .=  "',\n                    [";
#line 179 "template/en/default/search/field.html.tmpl"
        
        # FILTER
        $output .=  do {
            my $output = '';
            my $_tt_filter = $context->filter('js')
                      || $context->throw($context->error);
        
        $output .=  $stash->get(['controlled_ids', 0, 'join', [ ',' ]]);
            
            &$_tt_filter($output);
        };
        
        $output .=  "],\n                    '";
#line 180 "template/en/default/search/field.html.tmpl"
        
        # FILTER
        $output .=  do {
            my $output = '';
            my $_tt_filter = $context->filter('js')
                      || $context->throw($context->error);
        
        $output .=  $stash->get(['field', 0, 'name', 0]);
            
            &$_tt_filter($output);
        };
        
        $output .=  "',";
#line 181 "template/en/default/search/field.html.tmpl"
        
        # FILTER
        $output .=  do {
            my $output = '';
            my $_tt_filter = $context->filter('js')
                      || $context->throw($context->error);
        
        $output .=  $stash->get(['legal_value', 0, 'id', 0]);
            
            &$_tt_filter($output);
        };
        
        $output .=  ",\n                    true);";;
                    ($_tt_value, $_tt_error) = $_tt_list->get_next();
                }
            };
            $stash->set('loop', $_tt_oldloop);
            die $@ if $@;
            $_tt_error = 0 if $_tt_error && $_tt_error eq Template::Constants::STATUS_DONE;
            die $_tt_error if $_tt_error;
        };
        
            } };
            if ($@) {
                $_tt_error = $context->catch($@, \$output);
                die $_tt_error unless $_tt_error->type eq 'return';
            }
        
            return $output;
        },
    },
});
